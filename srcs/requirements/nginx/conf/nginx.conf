# https://www.nginx.com/resources/wiki/start/topics/examples/full/

events {
	worker_connections	1024;
}

#http {
	# upstream
	
server {
	listen	80;
	listen	[::]:80;
	listen	443 ssl;
	listen	[::]:443 ssl;

	server_name	adelille.42.fr;

	ssl					on;
	ssl_protocols		TLSv1.2;
	ssl_certificate		/etc/ssl/certs/adelille.42.fr;
	ssl_certificate_key	/etc/ssl/private/adelille.42.fr;

	root /var/www/wordpress;
	
	include /etc/nginx/mime.types;
		
	index index.php index.html index.htm index.nginx-debian.html;

	error_page 497 https://$server_name:443$request_uri;

	location / {
		try_files $uri $uri/ =404;
	}

	location ~ \.php$ {
		fastcgi_pass wordpress:9000;
		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
		include fastcgi_params
		include snippets/fastcgi-php.conf
	}
}
#}
